/*! ymci           2014-09-09 */

!function(a){var b,c=a(window),d={},e=[],f=[],g=!1,h=!1,i=null,j=null,k=null,l=null,m="_open",n="_close",o=null,p={_init:function(b){var c=a(b),d=c.data("popupoptions");f[b.id]=!1,e[b.id]=0,c.data("popup-initialized")||(c.attr("data-popup-initialized","true"),p._initonce(b)),d.autoopen&&setTimeout(function(){p.show(b,0)},0)},_initonce:function(c){var d,e=a("body"),f=$el.data("popupoptions");if(l=parseInt(e.css("margin-right"),10),"tooltip"==f.type&&(f.background=!1,f.scrolllock=!1),f.scrolllock){var g,h;"undefined"==typeof b&&(g=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),h=g.children(),b=h.innerWidth()-h.height(99).innerWidth(),g.remove())}if($el.attr("id")||$el.attr("id","j-popup-"+parseInt(1e8*Math.random())),$el.addClass("popup_content"),e.prepend(c),$el.wrap('<div id="'+c.id+'_wrapper" class="popup_wrapper" />'),d=a("#"+c.id+"_wrapper"),d.css({opacity:0,visibility:"hidden",position:"absolute",overflow:"auto"}),$el.css({opacity:0,visibility:"hidden",display:"inline-block"}),f.setzindex&&!f.autozindex&&d.css("z-index","2001"),f.outline||$el.css("outline","none"),f.transition&&($el.css("transition",f.transition),d.css("transition",f.transition)),a(c).attr("aria-hidden",!0),f.background&&!a("#"+c.id+"_background").length){var i='<div id="'+c.id+'_background" class="popup_background"></div>';e.prepend(i);var j=a("#"+c.id+"_background");j.css({opacity:0,visibility:"hidden",backgroundColor:f.color,position:"fixed",top:0,right:0,bottom:0,left:0}),f.setzindex&&!f.autozindex&&j.css("z-index","2000"),f.transition&&j.css("transition",f.transition)}"overlay"==f.type&&($el.css({textAlign:"left",position:"relative",verticalAlign:"middle"}),d.css({position:"fixed",top:0,right:0,left:0,bottom:0,textAlign:"center"}),d.append('<div class="popup_align" />'),a(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})),$el.attr("role","dialog");var k=f.openelement?f.openelement:"."+c.id+m;a(k).each(function(b,c){a(c).attr("data-popup-ordinal",b),a(c).attr("id")||a(c).attr("id","open_"+parseInt(1e8*Math.random(),10))}),$el.attr("aria-labelledby")||$el.attr("aria-label")||$el.attr("aria-labelledby",a(k).attr("id")),a(document).on("click",k,function(b){if(!$el.data("popup-visible")){var d=a(this).data("popup-ordinal");setTimeout(function(){p.show(c,d)},0),b.preventDefault()}});var o=f.closeelement?f.closeelement:"."+c.id+n;a(document).on("click",o,function(a){p.hide(c),a.preventDefault()}),f.detach?$el.hide().detach():d.hide()},show:function(d,m){var n=a(d);if(!n.data("popup-visible")){n.data("popup-initialized")||p._init(d),n.attr("data-popup-initialized","true");var r=a("body"),s=n.data("popupoptions"),t=a("#"+d.id+"_wrapper"),u=a("#"+d.id+"_background");if(q(d,m,s.beforeopen),f[d.id]=m,s.detach?(t.prepend(d),n.show()):t.show(),setTimeout(function(){t.css({visibility:"visible",opacity:1}),a("html").addClass("popup_visible").addClass("popup_visible_"+d.id),n.addClass("popup_content_visible")},20),n.css({visibility:"visible",opacity:1}),s.scrolllock&&(r.css("overflow","hidden"),r.height()>c.height()&&r.css("margin-right",l+b)),setTimeout(function(){g||(s.keepfocus&&a(document).on("focusin",i),s.blur&&a(document).on("click",j),s.escape&&a(document).on("keydown",k)),g?h=!0:g=!0},0),n.data("popup-visible",!0),p.reposition(d,m),s.background&&(u.css({visibility:"visible",opacity:s.opacity}),setTimeout(function(){u.css({opacity:s.opacity})},0)),o=document.activeElement,s.keepfocus&&(n.attr("tabindex",-1),setTimeout(function(){s.focuselement?a(s.focuselement).focus():n.focus()},s.focusdelay),i=function(a){var b=document.getElementById(d.id);b.contains(a.target)||(a.stopPropagation(),b.focus())}),s.autozindex){for(var v=document.getElementsByTagName("*"),w=v.length,x=0,y=0;w>y;y++){var z=a(v[y]).css("z-index");"auto"!==z&&(z=parseInt(z),z>x&&(x=z))}e[d.id]=x,e[d.id]>0&&t.css({zIndex:e[d.id]+2}),s.background&&e[d.id]>0&&a("#"+d.id+"_background").css({zIndex:e[d.id]+1})}s.blur&&(j=function(b){a(b.target).parents().andSelf().is("#"+d.id)||p.hide(d)}),s.escape&&(k=function(a){27==a.keyCode&&n.data("popup-visible")&&p.hide(d)}),a(s.pagecontainer).attr("aria-hidden",!0),n.attr("aria-hidden",!1),t.one("transitionend",function(){q(d,m,s.opentransitionend)}),q(d,m,s.onopen)}},hide:function(b){var c=a("body"),d=a(b),e=d.data("popupoptions"),m=a("#"+b.id+"_wrapper"),n=a("#"+b.id+"_background");d.data("popup-visible",!1),h?(a("html").removeClass("popup_visible_"+b.id),h=!1):(a("html").removeClass("popup_visible").removeClass("popup_visible_"+b.id),g=!1),d.removeClass("popup_content_visible"),e.scrolllock&&setTimeout(function(){c.css({overflow:"visible","margin-right":l})},10),e.blur&&a(document).off("click",j),e.keepfocus&&(a(document).off("focusin",i),setTimeout(function(){a(o).is(":visible")&&o.focus()},0)),e.escape&&a(document).off("keydown",k),m.css({visibility:"hidden",opacity:0}),d.css({visibility:"hidden",opacity:0}),e.background&&n.css({visibility:"hidden",opacity:0}),d.one("transitionend",function(){d.data("popup-visible")||(e.detach?d.hide().detach():m.hide()),e.notransitiondetach||q(b,f[b.id],e.closetransitionend)}),e.notransitiondetach&&(e.detach?d.hide().detach():m.hide()),a(e.pagecontainer).attr("aria-hidden",!1),d.attr("aria-hidden",!0),q(b,f[b.id],e.onclose)},toggle:function(a,b){$el.data("popup-visible")?p.hide(a):setTimeout(function(){p.show(a,b)},0)},reposition:function(b,c){{var d=a(b),e=d.data("popupoptions"),f=a("#"+b.id+"_wrapper");a("#"+b.id+"_background")}if(c=c||0,"tooltip"==e.type){f.css({position:"absolute"});var g=e.openelement?e.openelement:"."+b.id+m,h=a(g+'[data-popup-ordinal="'+c+'"]'),i=h.offset();"right"==e.horizontal?f.css("left",i.left+h.outerWidth()+e.offsetleft):"leftedge"==e.horizontal?f.css("left",i.left+h.outerWidth()-h.outerWidth()+e.offsetleft):"left"==e.horizontal?f.css("right",a(window).width()-i.left-e.offsetleft):"rightedge"==e.horizontal?f.css("right",a(window).width()-i.left-h.outerWidth()-e.offsetleft):f.css("left",i.left+h.outerWidth()/2-d.outerWidth()/2-parseFloat(d.css("marginLeft"))+e.offsetleft),"bottom"==e.vertical?f.css("top",i.top+h.outerHeight()+e.offsettop):"bottomedge"==e.vertical?f.css("top",i.top+h.outerHeight()-d.outerHeight()+e.offsettop):"top"==e.vertical?f.css("bottom",a(window).height()-i.top-e.offsettop):"topedge"==e.vertical?f.css("bottom",a(window).height()-i.top-d.outerHeight()-e.offsettop):f.css("top",i.top+h.outerHeight()/2-d.outerHeight()/2-parseFloat(d.css("marginTop"))+e.offsettop)}else"overlay"==e.type&&(e.horizontal?f.css("text-align",e.horizontal):f.css("text-align","center"),e.vertical?d.css("vertical-align",e.vertical):d.css("vertical-align","middle"))}},q=function(b,c,e){var f=d.openelement?d.openelement:"."+b.id+m,g=a(f+'[data-popup-ordinal="'+c+'"]');"function"==typeof e&&e(g)};a.fn.popup=function(b){return this.each(function(){if($el=a(this),"object"==typeof b){var c=a.extend({},a.fn.popup.defaults,b);$el.data("popupoptions",c),d=$el.data("popupoptions"),p._init(this)}else"string"==typeof b?($el.data("popupoptions")||($el.data("popupoptions",a.fn.popup.defaults),d=$el.data("popupoptions")),p[b].call(this,this)):($el.data("popupoptions")||($el.data("popupoptions",a.fn.popup.defaults),d=$el.data("popupoptions")),p._init(this))})},a.fn.popup.defaults={type:"overlay",autoopen:!1,background:!0,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:!0,blur:!0,setzindex:!0,autozindex:!1,scrolllock:!1,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,notransitiondetach:!1,beforeopen:function(){},onclose:function(){},onopen:function(){},opentransitionend:function(){},closetransitionend:function(){}}}(jQuery);
//# sourceMappingURL=deps.min.js.map